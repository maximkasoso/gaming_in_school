<!DOCTYPE html>
<html>
<head>
    <title>Slingshot Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: skyblue;
        }
        canvas {
            display: block;
        }
        #instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-family: Arial;
        }
    </style>
</head>
<body>
    <div id="instructions">Click & drag to launch the bird!</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <script>
        // Setup Matter.js engine
        const Engine = Matter.Engine,
              Render = Matter.Render,
              Runner = Matter.Runner,
              Bodies = Matter.Bodies,
              Mouse = Matter.Mouse,
              MouseConstraint = Matter.MouseConstraint;

        // Create engine and renderer
        const engine = Engine.create();
        const world = engine.world;
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: 800,
                height: 600,
                wireframes: false,
                background: "skyblue"
            }
        });

        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Game objects
        const ground = Bodies.rectangle(400, 590, 810, 20, { isStatic: true });
        const leftWall = Bodies.rectangle(0, 300, 20, 600, { isStatic: true });
        const rightWall = Bodies.rectangle(800, 300, 20, 600, { isStatic: true });

        // Target blocks
        const block1 = Bodies.rectangle(600, 500, 60, 60);
        const block2 = Bodies.rectangle(650, 500, 60, 60);
        const block3 = Bodies.rectangle(700, 500, 60, 60);

        // Bird
        const bird = Bodies.circle(150, 450, 20, {
            restitution: 0.8,
            render: { fillStyle: 'red' }
        });

        // Add all bodies to the world
        Matter.Composite.add(world, [ground, leftWall, rightWall, block1, block2, block3, bird]);

        // Slingshot mechanic
        let isDragging = false;
        let startPos = { x: 0, y: 0 };

        document.addEventListener('mousedown', (e) => {
            const mousePos = { x: e.clientX, y: e.clientY };
            if (Matter.Bounds.contains(bird.bounds, mousePos)) {
                isDragging = true;
                startPos = mousePos;
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const mousePos = { x: e.clientX, y: e.clientY };
                const force = {
                    x: (startPos.x - mousePos.x) * 0.1,
                    y: (startPos.y - mousePos.y) * 0.1
                };
                Matter.Body.setPosition(bird, mousePos);
            }
        });

        document.addEventListener('mouseup', (e) => {
            if (isDragging) {
                isDragging = false;
                const mousePos = { x: e.clientX, y: e.clientY };
                const force = {
                    x: (startPos.x - mousePos.x) * 0.1,
                    y: (startPos.y - mousePos.y) * 0.1
                };
                Matter.Body.setVelocity(bird, force);
            }
        });
    </script>
</body>
</html>
